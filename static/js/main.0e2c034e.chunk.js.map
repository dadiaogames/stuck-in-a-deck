{"version":3,"sources":["icons.js","cards.js","enemies.js","Game.js","Ripple.js","Board.js","tutorial.js","Shaker.js","App.js","serviceWorker.js","index.js"],"names":["ICONS","power","src","style","height","hp","knowledge","search","atk","thread","card","discard","skull","deck","scissor","out","BASIC_CARDS","k1","desc","price","is_treasure","onPlay","G","ctx","k2","k3","search1","search2","search3","atk1","atk2","YOU","is_action","onUse","use_power","CARDS","cost_type","draw","unshift","copper","hand","find","x","filter","treasure","random","Shuffle","previews_onplay","use_knowledge","purged","sort","a","b","Math","floor","length","upgrade","expensive_card","push","map","attack","hit_points","min","onOut","MOBS","max_hp","deal_damage","mob","is_mob","PORTAL","is_portal","anger","anger_threshold","setup","refresh_data","_","times","shop","slice","Object","values","console","log","splice","amount","alert","reset_and_tweak","tweakers","LDDBG","moves","tweak","key","end_turn","events","endTurn","buy","idx","use","pay_card_cost","threads","goal","refresh_shop","refresh_times","D4","turn","onBegin","i","ripple_style","position","borderRadius","width","background","Ripple","props","from_state","variants","transform","opacity","anim","useSpring","from","to","playing","onRest","setPlaying","config","duration","div","className","show_tutorial","Card","shaker","changeX","changeY","onEnd","y","to_state","interpolate","useShaker","shaking","set_shaking","border","selected","undefined","onClick","handleClick","ripple","rippling","set_rippling","top","left","App","Client","game","board","useState","show_shop","set_show_shop","hand_selected","set_hand_selected","shop_selected","set_shop_selected","set_tweakers","shakers","set_shakers","ripples","set_ripples","score_ripple","set_score_ripple","use_card","selected_card","item","cards","tune_difficulty","direction","score_diff","ceil","hp_diff","new_tweakers","assign","reset","useEffect","borderColor","select","value","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.0e2c034e.chunk.js","sourcesContent":["import React from 'react';\n\nconst height = \"1.1em\";\n\nexport const ICONS = {\n  power: <img src=\"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/apple/237/high-voltage-sign_26a1.png\" style={{height}}></img>,\n  hp: <img src=\"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/apple/237/heavy-black-heart_2764.png\" style={{height}}></img>,\n  knowledge: <img src=\"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/docomo/205/electric-light-bulb_1f4a1.png\" style={{height}}></img>,\n  search: <img src=\"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/samsung/265/magnifying-glass-tilted-right_1f50e.png\" style={{height}}></img>,\n  atk: <img src=\"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/apple/237/crossed-swords_2694.png\" style={{height}}></img>,\n  thread: <img src=\"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/apple/237/hiking-boot_1f97e.png\" style={{height}}></img>,\n  card: <img src=\"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/openmoji/252/flower-playing-cards_1f3b4.png\" style={{height}}></img>,\n  discard: <img src=\"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/openmoji/252/wastebasket_1f5d1.png\" style={{height}}></img>,\n  skull: <img src=\"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/microsoft/209/skull_1f480.png\" style={{height}}></img>,\n  deck: <img src=\"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/htc/37/bookmark-tabs_1f4d1.png\" style={{height}}></img>,\n  scissor: <img src=\"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/openmoji/252/scissors_2702.png\" style={{height}}></img>,\n  out: <img src=\"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/google/263/skull-and-crossbones_2620.png\" style={{height}}></img>,\n};","import React from 'react';\nimport { discard, draw, use_power, use_knowledge } from './Game';\nimport { ICONS } from './icons';\n\nexport const BASIC_CARDS = {\n  k1: {\n    desc: <span>+1 {ICONS.knowledge}</span>,\n    src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/docomo/205/electric-light-bulb_1f4a1.png\",\n    price: 0,\n    is_treasure: true,\n    onPlay(G, ctx) {\n      G.knowledge += 1;\n    }\n  },\n  k2: {\n    desc: <span>+2 {ICONS.knowledge}</span>,\n    src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/docomo/205/electric-light-bulb_1f4a1.png\",\n    price: 3,\n    is_treasure: true,\n    onPlay(G, ctx) {\n      G.knowledge += 2;\n    }\n  },\n  k3: {\n    desc: <span>+3 {ICONS.knowledge}</span>,\n    src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/docomo/205/electric-light-bulb_1f4a1.png\",\n    price: 6,\n    is_treasure: true,\n    onPlay(G, ctx) {\n      G.knowledge += 3;\n    }\n  },\n  \n  search1: {\n    desc: <span>+1 {ICONS.search}</span>,\n    price: 2,\n    src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/samsung/265/magnifying-glass-tilted-right_1f50e.png\",\n    onPlay(G, ctx) {\n      G.search += 1;\n    }\n  },\n  search2: {\n    desc: <span>+2 {ICONS.search}</span>,\n    price: 5,\n    src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/samsung/265/magnifying-glass-tilted-right_1f50e.png\",\n    onPlay(G, ctx) {\n      G.search += 2;\n    }\n  },\n  search3: {\n    desc: <span>+3 {ICONS.search}</span>,\n    price: 8,\n    src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/samsung/265/magnifying-glass-tilted-right_1f50e.png\",\n    onPlay(G, ctx) {\n      G.search += 3;\n    }\n  },\n\n  atk1: {\n    desc: <span>+1 {ICONS.atk}</span>,\n    src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/apple/237/crossed-swords_2694.png\",\n    price: 2,\n    onPlay(G, ctx) {\n      G.atk += 1;\n    }\n  },\n  atk2: {\n    desc: <span>+2 {ICONS.atk}</span>,\n    src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/apple/237/crossed-swords_2694.png\",\n    price: 5,\n    onPlay(G, ctx) {\n      G.atk += 2;\n    }\n  },\n};\n\nexport const YOU = {\n  desc: <span>YOU(+1{ICONS.power})<br/>{ICONS.power}: +3{ICONS.knowledge}</span>,\n  src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/apple/237/older-man_1f474.png\",\n  is_action: true,\n  onPlay(G, ctx, card) {\n    G.power += 1;\n  },\n  onUse(G, ctx) {\n    if (use_power(G, ctx)) {\n      G.knowledge += 3;\n    }\n  }\n};\n\nexport const CARDS = [\n  {\n    desc: <span>{ICONS.discard}: +2{ICONS.card}</span>,\n    price: 5,\n    src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/apple/237/test-tube_1f9ea.png\",\n    cost_type: \"discard\",\n    onUse(G, ctx, card) {\n      draw(G, ctx);\n      draw(G, ctx);\n    }\n  },\n  {\n    desc: <span>{ICONS.power}: +3{ICONS.card}</span>,\n    price: 4,\n    src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/google/263/memo_1f4dd.png\",\n    cost_type: \"power\",\n    onUse(G, ctx, card) {\n        draw(G, ctx);\n        draw(G, ctx);\n        draw(G, ctx);\n    }\n  },\n  {\n    desc: <span>{ICONS.discard}: +1{ICONS.power}, +1{ICONS.card}</span>,\n    price: 3,\n    src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/apple/237/horse-racing_1f3c7.png\",\n    cost_type: \"discard\",\n    onUse(G, ctx, card) {\n      G.power += 1;\n      draw(G, ctx);\n    }\n  },\n  {\n    desc: <span>{ICONS.power}: Put an [+2{ICONS.knowledge}] into your {ICONS.deck} </span>,\n    price: 2,\n    src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/apple/237/bearded-person_emoji-modifier-fitzpatrick-type-1-2_1f9d4-1f3fb_1f3fb.png\",\n    cost_type: \"power\",\n    onUse(G, ctx, card) {\n        G.deck.unshift(BASIC_CARDS.k2);\n    }\n  },\n  {\n    desc: <span>{ICONS.power}: Purge an [+1{ICONS.knowledge}] card, +3{ICONS.knowledge} </span>,\n    price: 4,\n    src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/whatsapp/238/black-scissors_2702.png\",\n    cost_type: \"power\",\n    onUse(G, ctx, card) {\n        let copper = G.hand.find(x => x.price == 0);\n        G.hand = G.hand.filter(x => x != copper);\n        G.knowledge += 3;\n    }\n  },\n  {\n    desc: <span>{ICONS.discard}: +1{ICONS.power}, +2{ICONS.knowledge}</span>,\n    price: 4,\n    src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/apple/237/dancer_1f483.png\",\n    cost_type: \"discard\",\n    onUse(G, ctx, card) {\n      G.power += 1;\n      G.knowledge += 2;\n    }\n  },\n  {\n    desc: <span>{ICONS.power}: Turn one of your [+X{ICONS.knowledge}] card into [+(X+1){ICONS.knowledge}]</span>,\n    price: 5,\n    src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/google/263/orange-book_1f4d9.png\",\n    cost_type: \"power\",\n    onUse(G, ctx, card) {\n        let treasure = ctx.random.Shuffle(G.hand.filter(x => x.is_treasure))[0];\n        if (treasure) {\n          treasure.desc = [treasure.desc, <span> ,+1 {ICONS.knowledge}</span>];\n          let previews_onplay = treasure.onPlay;\n          treasure.onPlay = (G, ctx) => {previews_onplay(G, ctx); G.knowledge += 1;};\n        }\n    }\n  },\n  {\n    desc: <span>{ICONS.discard},{ICONS.atk}2: +4{ICONS.search}</span>,\n    price: 3,\n    cost_type: \"discard\",\n    src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/google/263/man-running_1f3c3-200d-2642-fe0f.png\",\n    onUse(G, ctx, card) {\n      if (G.atk >= 2) {\n        G.atk -= 2;\n        G.search += 4;\n      }\n    }\n  },\n  {\n    desc: <span>{ICONS.discard},{ICONS.search}2: +4{ICONS.atk}</span>,\n    price: 3,\n    cost_type: \"discard\",\n    src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/apple/237/bow-and-arrow_1f3f9.png\",\n    onUse(G, ctx, card) {\n      if (G.search >= 2) {\n        G.search -= 2;\n        G.atk += 4;\n      }\n    }\n  },\n  // {\n  //   desc: <span>{ICONS.discard}, {ICONS.knowledge}3: +2{ICONS.atk}</span>,\n  //   price: 3,\n  //   src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/apple/237/fencer_1f93a.png\",\n  //   onUse(G, ctx, card) {\n  //     if (use_knowledge(G, ctx, 3)) {\n  //       discard(G, card);\n  //       G.atk += 2;\n  //     }\n  //   }\n  // },\n  {\n    desc: <span>{ICONS.discard}, {ICONS.knowledge}2: +2{ICONS.search}</span>,\n    price: 3,\n    src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/apple/237/books_1f4da.png\",\n    onUse(G, ctx, card) {\n      if (use_knowledge(G, ctx, 3)) {\n        discard(G, card);\n        G.search += 2;\n      }\n    }\n  },\n  {\n    desc: <span>{ICONS.discard}: +2{ICONS.power}</span>,\n    price: 6,\n    src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/apple/237/hourglass-with-flowing-sand_23f3.png\",\n    onUse(G, ctx, card) {\n      discard(G, card);\n      G.power += 2;\n    }\n  },\n  {\n    desc: <span>{ICONS.knowledge}2: Purge the cheapest card from your hand</span>,\n    price: 2,\n    src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/emojidex/112/black-scissors_2702.png\",\n    onUse(G, ctx, card) {\n      if (use_knowledge(G, ctx, 2)) {\n        let purged = G.hand.filter(x => x.price >= 0).sort((a,b) => a.price - b.price)[0];\n        G.hand = G.hand.filter(x => x != purged);\n      }\n    }\n  },\n  // {\n  //   desc: <span>{ICONS.discard}: +1{ICONS.card}, then +1{ICONS.knowledge} per card in your hand that priced 3</span>,\n  //   price: 3,\n  //   src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/apple/237/leopard_1f406.png\",\n  //   cost_type: \"discard\",\n  //   onUse(G, ctx, card) {\n  //     draw(G, ctx);\n  //     G.knowldge += G.hand.filter(x => x.price == 3).length;\n  //   }\n  // },\n  {\n    desc: <span>{ICONS.discard}: +1{ICONS.search} per 8{ICONS.card} in your overall deck</span>,\n    price: 4,\n    src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/apple/237/sunflower_1f33b.png\",\n    cost_type: \"discard\",\n    onUse(G, ctx, card) {\n      G.search += Math.floor([...G.deck, ...G.hand, ...G.discard].length / 8);\n    }\n  },\n  {\n    desc: <span>{ICONS.power}: Upgrade 1{ICONS.card} in your hand, let it +1{ICONS.search}, +2{ICONS.atk}, or +2{ICONS.knowledge}</span>,\n    price: 3,\n    src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/google/263/pen_1f58a.png\",\n    cost_type: \"power\",\n    onUse(G, ctx) {\n      let card = ctx.random.Shuffle(G.hand.filter(x => x.onPlay))[0];\n      let upgrade = ctx.random.Shuffle([\n        [<span>, +1{ICONS.search}</span>, (G, ctx) => {G.search += 1;}],\n        [<span>, +2{ICONS.atk}</span>, (G, ctx) => {G.atk += 2;}],\n        [<span>, +2{ICONS.knowledge}</span>, (G, ctx) => {G.knowledge += 2;}],\n      ])[0];\n      card.desc = [card.desc, upgrade[0]];\n      let previews_onplay = card.onPlay;\n      card.onPlay = (G, ctx) => {previews_onplay(G, ctx, card); upgrade[1](G, ctx);};\n    }\n  },\n  {\n    desc: <span>Purge this: Add a copy of your most expensive {ICONS.card} in hand to your discard</span>,\n    price: 3,\n    src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/google/263/ticket_1f3ab.png\",\n    onUse(G, ctx, card) {\n      G.hand = G.hand.filter(x => x != card);\n      let expensive_card = G.hand.filter(x => x.price >= 0).sort((a,b) => b.price - a.price)[0];\n      if (expensive_card) {\n        G.discard.push({...expensive_card});\n      }\n    }\n  },\n  {\n    desc: <span>{ICONS.discard}: +2{ICONS.knowledge}, if {ICONS.power} is more than 2, then +1{ICONS.power} and +1{ICONS.card}</span>,\n    price: 4,\n    src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/apple/237/battery_1f50b.png\",\n    cost_type: \"discard\",\n    onUse(G, ctx, card) {\n      G.knowledge += 2;\n      if (G.power >= 2) {\n        G.power += 1;\n        draw(G, ctx);\n      }\n    }\n  },\n  {\n    desc: <span>{ICONS.discard}, {ICONS.atk}2: +2{ICONS.power}</span>,\n    price: 2,\n    src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/apple/237/soccer-ball_26bd.png\",\n    cost_type: \"discard\",\n    onUse(G, ctx, card) {\n      if (G.atk >= 2) {\n        G.atk -= 2;\n        G.power += 2;\n      }\n    }\n  },\n  // {\n  //   desc: <span>{ICONS.power}: +1{ICONS.knowledge} per {ICONS.card}[+1{ICONS.knowledge}] in your hand</span>,\n  //   price: 3,\n  //   src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/apple/237/ledger_1f4d2.png\",\n  //   cost_type: \"power\",\n  //   onUse(G, ctx, card) {\n  //     G.knowledge += G.hand.filter(x => x.price == 0).length;\n  //   }\n  // },\n].map(x => ({...x, is_action:true}));","import React from 'react';\nimport { deal_damage, draw, use_power } from './Game';\nimport { ICONS } from './icons';\n\nfunction attack(G, ctx, card) {\n  let hit_points = Math.min(G.atk, card.hp);\n  G.atk -= hit_points;\n  card.hp -= hit_points;\n  if (card.hp <= 0) {\n    G.hand = G.hand.filter(x => x != card);\n    card.onOut(G, ctx, card);\n  }\n}\n\nexport const MOBS = [\n  {\n    desc: <span>-2{ICONS.hp} &nbsp;({ICONS.out}: +3{ICONS.search})</span>,\n    src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/microsoft/209/imp_1f47f.png\",\n    max_hp: 4,\n    onPlay(G, ctx) {\n      deal_damage(G, ctx, 2);\n    },\n    onOut(G, ctx) {\n      G.search += 3;\n    },\n  },\n  {\n    desc: <span>-2{ICONS.hp} &nbsp;({ICONS.out}: +1{ICONS.card})</span>,\n    src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/microsoft/209/imp_1f47f.png\",\n    max_hp: 2,\n    onPlay(G, ctx) {\n      deal_damage(G, ctx, 2);\n    },\n    onOut(G, ctx) {\n      draw(G, ctx);\n    },\n  },\n  {\n    desc: <span>-2{ICONS.hp} &nbsp;({ICONS.out}: +1{ICONS.power})</span>,\n    src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/microsoft/209/imp_1f47f.png\",\n    max_hp: 3,\n    onPlay(G, ctx) {\n      deal_damage(G, ctx, 2);\n    },\n    onOut(G, ctx) {\n      G.power += 1;\n    },\n  },\n].map(mob => ({...mob, hp:mob.max_hp, is_mob:true, onUse:attack}));\n\nexport const PORTAL = {\n  desc: \"PORTAL\",\n  src: \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/mozilla/36/door_1f6aa.png\",\n  hp: 999,\n  // is_mob: true,\n  is_portal: true,\n  anger: 0,\n  onPlay(G, ctx, card) {\n    G.discard.push({...ctx.random.Shuffle(MOBS)[0]});\n    card.anger += 1;\n    if (card.anger >= G.anger_threshold) {\n      card.anger = 0;\n      G.discard.push({...PORTAL});\n    }\n  }\n};","import _ from 'lodash';\nimport { BASIC_CARDS, CARDS, YOU } from \"./cards\";\nimport { MOBS, PORTAL } from './enemies';\n\nfunction setup(ctx) {\n  const G = {};\n\n  G.hp = 20;\n  G.threads = 0;\n  G.goal = 10;\n  G.anger_threshold = 4;\n  refresh_data(G);\n\n  G.deck = ctx.random.Shuffle([..._.times(5, ()=>BASIC_CARDS.k1), BASIC_CARDS.k2, BASIC_CARDS.atk1, BASIC_CARDS.atk1, BASIC_CARDS.search1, BASIC_CARDS.search1, PORTAL, YOU]);\n  G.hand = [];\n  G.discard = [];\n  G.shop = [...ctx.random.Shuffle(CARDS).slice(0, 7), ...Object.values(BASIC_CARDS).filter(x => x.price > 2)];\n\n  return G;\n}\n\nexport function draw(G, ctx) {\n  if (G.deck.length > 0) {\n    console.log(\"Draw card\");\n    let card = G.deck.splice(0, 1)[0];\n    card.onPlay && card.onPlay(G, ctx, card);\n    G.hand.unshift(card);\n  }\n}\n\nfunction refresh_data(G) {\n  G.power = 1;\n  G.knowledge = 0;\n  G.search = 0;\n  G.atk = 0;\n}\n\nfunction onTurnBegin(G, ctx) {\n  refresh_data(G);\n  if (G.deck.length < 5) {\n    G.deck = ctx.random.Shuffle([...G.deck, ...G.discard]);\n    G.discard = [];\n  }\n  for (let i=0; i<5; i++) {\n    draw(G, ctx);\n  }\n}\n\nexport function use_power(G, ctx) {\n  if (G.power > 0) {\n    G.power -= 1;\n    return true;\n  }\n  else {\n    return false;\n  }\n}\n\nfunction search(G, ctx) {\n  if (use_power(G, ctx)) {\n    G.threads += G.search;\n  }\n  if (G.threads >= G.goal && G.hp > 0) {\n    alert(\"You have successfully escaped the loop!\");\n  }\n}\n\nexport function use_knowledge(G, ctx, price) {\n  if (G.knowledge >= price) {\n    G.knowledge -= price;\n    return true;\n  }\n  else{return false;}\n}\n\nfunction end_turn(G, ctx) {\n  G.discard = [...G.hand, ...G.discard];\n  G.hand = [];\n\n  ctx.events.endTurn();\n}\n\nfunction buy(G, ctx, idx) {\n  let card = G.shop[idx];\n  if (card && use_knowledge(G, ctx, card.price)) {\n    G.discard.push({...card});\n  }\n}\n\nfunction refresh_shop(G, ctx, refresh_times) {\n  _.times(refresh_times, ctx.random.D4);\n  G.shop = [...ctx.random.Shuffle(CARDS).slice(0, 7), ...Object.values(BASIC_CARDS).filter(x => x.price > 2)];\n}\n\nfunction pay_card_cost(G, ctx, card) {\n  if (card.cost_type == \"power\") {\n    if (use_power(G, ctx)) {\n      return true;\n    }\n    else {\n      return false;\n    }\n  } \n  else if (card.cost_type == \"discard\") {\n    G.hand = G.hand.filter(x => x != card);\n    return true;\n  }\n  else {\n    return true;\n  }\n}\n\nfunction use(G, ctx, idx) {\n  let card = G.hand[idx];\n  card && card.onUse && pay_card_cost(G, ctx, card) && card.onUse(G, ctx, card);\n}\n\nfunction tweak(G, ctx, tweakers) {\n  for (let key in tweakers) {\n    G[key] = tweakers[key];\n  }\n}\n\nexport function deal_damage(G, ctx, amount) {\n  G.hp -= amount;\n  if (G.hp <= 0) {\n    alert(\"You lose the game!\");\n    reset_and_tweak(G, ctx, G.tweakers);\n  }\n}\n\nexport function reset_and_tweak(G, ctx, tweakers) {\n  G = setup(ctx);\n  if (tweakers) {\n    G.tweakers = tweakers;\n    G = {...G, ...tweakers};\n  }\n}\n\nexport function discard(G, card) {\n  G.hand = G.hand.filter(x => x != card);\n  G.discard.push(card);\n}\n\nexport const LDDBG = {\n  setup,\n  moves: {\n    reset_and_tweak,\n    tweak,\n    end_turn,\n    buy,\n    use,\n    search,\n    refresh_shop,\n  },\n  turn: {\n    onBegin: onTurnBegin,\n  },\n};","import React, { useState } from 'react';\nimport { useSpring, animated, config as springConfig } from 'react-spring';\n\nconst ripple_style = {\n  position: \"absolute\",\n  borderRadius: \"50%\",\n  width: \"200px\",\n  height: \"200px\",\n  background: \"rgba(160, 160, 160, 0.5)\",\n  // zIndex: -1,\n};\n\nexport function Ripple(props) {\n  // Props: playing, setPlaying, variants\n  // console.log(\"Ripple render:\", props.playing);\n  let from_state = {\n    ...ripple_style,\n    ...props.variants, // Here, \"variants\" for additional styles and \"variant\" for one type of style, but maybe \"type\" is more prefered than \"variant\"\n    transform: \"scale(0)\",\n    opacity: 1,\n  };\n  let to_state = [{\n    opacity: 0,\n    transform: \"scale(2)\",\n  }, \n  {\n    transform: \"scale(0)\",\n  }\n  ];\n  let anim = useSpring({\n    from: from_state,\n    to: (props.playing)? to_state : from_state,\n    onRest() {\n      if (props.playing) {\n        props.setPlaying(false);\n      }\n    },\n    config: {duration: 290},\n  });\n   return <animated.div \n      className=\"ripple\" \n      style = {anim}\n    >\n    </animated.div>;\n}","import React, { useEffect, useState } from 'react';\nimport { ICONS } from './icons';\nimport { TUTORIAL } from './tutorial';\nimport { useShaker } from './Shaker';\nimport { Ripple } from './Ripple';\nimport { animated } from 'react-spring';\n\nimport './Board.css';\n\nfunction show_tutorial() {\n  alert(TUTORIAL);\n}\n\nfunction Card(props) {\n  let shaker = useShaker(props.shaker.shaking, props.shaker.set_shaking, -30, -30, {duration:125});\n\n  // TODO: Reconstruct this into \"get_desc\" function\n  return <animated.div className=\"card\" style={{border:(props.selected)?\"3px solid blue\":undefined, ...shaker}} onClick={props.handleClick}>\n    <div className=\"card-desc\">{(props.price>=0)?[\"(\",ICONS.knowledge,props.price,\")\", <br/>]:undefined}{props.desc}{props.card.is_mob?[<br/>,\"(\",ICONS.hp,props.card.hp,\"/\",props.card.max_hp,\")\"]:undefined}{props.card.is_portal?[\"(\",ICONS.skull,props.card.anger,\"/\",props.G.anger_threshold,\")\"]:undefined}</div>\n    <div className=\"card-container\" >\n      <img className=\"card-img\" src={props.src}></img>\n    </div>\n    <Ripple playing={props.ripple.rippling} setPlaying={props.ripple.set_rippling} variants={{top: \"-5%\", left: \"-5%\"}}></Ripple>\n\n  </animated.div>\n}\n\nexport function Board(props) {\n  let [show_shop, set_show_shop] = useState(false);\n  let [hand_selected, set_hand_selected] = useState(-1);\n  let [shop_selected, set_shop_selected] = useState(-1);\n  let [tweakers, set_tweakers] = useState({goal:10, hp:20});\n  let [shakers, set_shakers] = useState({});\n  let [ripples, set_ripples] = useState({});\n  let [score_ripple, set_score_ripple] = useState(true);\n\n  let use_card = \"Use Card\";\n  if (show_shop) {\n    use_card = \"Buy Card\";\n  }\n  else {\n    let selected_card = props.G.hand[hand_selected]\n    if (selected_card && selected_card.is_mob) {\n      use_card = <span>Attack({ICONS.atk})</span>;\n    }\n  }\n\n  let card = props.G.hand[hand_selected];\n  let item = props.G.shop[shop_selected];\n\n  let handle_use_card = () => {\n    if (show_shop) {\n      props.moves.buy(shop_selected);\n      set_ripples({...ripples, [shop_selected]: true})\n      set_shop_selected(-1);\n      if ((!item) || props.G.knowledge - item.price < 3) { \n        set_show_shop(false);\n      }\n    }\n    else {\n      props.moves.use(hand_selected);\n      if (card.is_mob) {\n        set_shakers({...shakers, [hand_selected]: true});\n      }\n      if (card.is_action) {\n        set_ripples({...ripples, [hand_selected]: true})\n      }\n      set_hand_selected(-1);\n    }\n  };\n\n  let cards = show_shop?props.G.shop:props.G.hand;\n  let selected = (idx) => show_shop?(shop_selected == idx):(hand_selected == idx);\n  let select = (idx) => show_shop?set_shop_selected(idx):set_hand_selected(idx);\n\n  let tune_difficulty = (direction) => {\n    let score_diff = Math.ceil(Math.random() * 4);\n    let hp_diff = Math.ceil(Math.random() * 2);\n    let new_tweakers = Object.assign({}, tweakers);\n    if (direction < 0) {\n      new_tweakers.goal -= score_diff;\n      new_tweakers.hp += hp_diff;\n    }\n    else {\n      new_tweakers.goal += score_diff;\n      new_tweakers.hp -= hp_diff;\n    }\n    props.reset();\n    props.moves.tweak(new_tweakers);\n    set_tweakers(new_tweakers);\n    props.moves.refresh_shop(Math.floor(Math.random()*100));\n  };\n\n  useEffect(() => set_score_ripple(true), [props.G.threads]);\n\n  return <div className=\"board\">\n    <button className=\"game-button show-shop\" onClick={() => set_show_shop(!show_shop)}>{show_shop?\"Show Hand\":\"Show Shop\"}</button>\n    <div className=\"cardrow\" style={{borderColor: (show_shop)?\"#00cd00\":undefined}}>\n      {cards.map((card,idx) => <Card desc={card.desc} src={card.src} selected={selected(idx)} handleClick={() => select(idx)} price={show_shop?card.price:undefined} card={card} G={props.G} shaker={{shaking:shakers[idx], set_shaking:(value)=>set_shakers({...shakers, [idx]:value})}} ripple={{rippling: ripples[idx], set_rippling:(value)=>set_ripples({...ripples, [idx]:value})}} />)}\n    </div>\n    <button className=\"game-button use-card\" onClick={handle_use_card}>{use_card}</button>\n    <button className=\"game-button search\" onClick={props.moves.search}>Search({ICONS.power})</button>\n    <button className=\"game-button end-turn\" onClick={props.moves.end_turn}>End Turn</button>\n    <div className=\"data\">{ICONS.power}:{props.G.power} &nbsp;&nbsp;{ICONS.hp}:{props.G.hp} &nbsp;&nbsp;{ICONS.knowledge}:{props.G.knowledge} &nbsp;&nbsp;{ICONS.search}:{props.G.search} &nbsp;&nbsp;{ICONS.atk}:{props.G.atk} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ICONS.thread}:{props.G.threads}/{props.G.goal}</div>\n    <Ripple variants={{top:\"55%\", left:\"38%\"}} playing={score_ripple} setPlaying={set_score_ripple} />\n    <button className=\"game-button use-card\" onClick={show_tutorial}>How to play</button>\n    <button className=\"game-button\" onClick={() => tune_difficulty(-1)}>Easier</button>\n    <button className=\"game-button\" onClick={() => tune_difficulty(1)}>Harder</button>\n  </div>;\n}\n","export const TUTORIAL = `Welcome to Stuck In A Deck!\nYou are stuck in a deck, which when all deck cards are played and discarded, the discard pile will become the deck again, and cards are always looping between the deck and discard.\nYou, as a card, need to escape from this loop!\nHowever, here are some threads you can find about how to escape, if you Search.\n(If you have played other deck building games like Dominion/Ascension/DreamQuests/SlayTheSpire, you will quickly get into this game.)\n\nHow to play:\n* The goal is to get enough threads(marked with a shoe).\n* To get threads, you need to Search, cost 1 power(marked with thunder), and gain threads equal to your search power(marked with a lens).\n* To reinforce your deck, you may use knowledge(marked with bulb) to buy cards from shop.\n* To attack a mob, cost some attack power, and deal damage equal to the attack power cost.\n* The PORTAL will keep inserting new mobs into your deck, and when it inserts 4 times, a new PORTAL will be inserted into your deck, so escape as quickly as you can!\n* Cards got different ways to use. Cards with no \":\" in desc effect when you draw them; Cards with \":\" are in format \"<cost>: <effect>\", some cost a power, some may discard themselves(marked with bin), and some may cost your knowledge or other powers.`;","import React from 'react';\nimport { useSpring, animated, interpolate } from 'react-spring';\n\nexport function useShaker(playing, setPlaying, changeX=0, changeY=0, config, onEnd) {\n  let from_state = {\n    x: 0,\n    y: 0\n  };\n  let to_state = {\n    x: changeX,\n    y: changeY,\n  };\n\n  let {x, y} = useSpring({\n    from: from_state,\n    to: (playing)? [to_state, from_state] : from_state,\n    config,\n    onRest() {\n      if (playing) {\n        setPlaying(false);\n        onEnd && onEnd();\n      }\n    },\n  });\n\n  return {\n    transform: interpolate([x,y], (x,y)=>`translate(${x}px, ${y}px)`)\n  };\n}","import { Client } from 'boardgame.io/react';\nimport { LDDBG } from './Game';\nimport { Board } from './Board';\n\n// import 'antd/dist/antd.css';\n\nconst App = Client({ \n  game: LDDBG, \n  board: Board,\n  // debug: false,\n});\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}